(this["webpackJsonpface-detector"]=this["webpackJsonpface-detector"]||[]).push([[0],{28:function(e,t,a){},32:function(e,t,a){e.exports=a(76)},37:function(e,t,a){},38:function(e,t,a){},76:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(29),l=a.n(i),c=(a(37),a(38),a(8)),o=a(9),s=a(11),u=a(10),m=a(12);var p=function(e){return r.a.createElement("div",{className:"button button-circle input__button",onClick:e.handleClick},r.a.createElement("div",{className:"button-circle__circle"}),r.a.createElement("a",{href:"#"},e.text))};var d=function(){return r.a.createElement("nav",{className:"nav wrapper"},r.a.createElement("p",{className:"logo flip-horizontal-bottom"},"Face Detector"),r.a.createElement(p,{text:"sign up"}))};var h=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"file",name:"file",accept:"image/*",id:"file",className:"input-file",onChange:e.handleFileChange}),r.a.createElement("label",{htmlFor:"file",className:"input-file__label"},r.a.createElement("div",{className:"input-file__circle"}),r.a.createElement("span",null,"Upload photo")))};var f=function(e){return r.a.createElement("section",{className:"form wrapper"},r.a.createElement("input",{type:"text",placeholder:"Enter an URL",className:"form__input",onChange:e.handleInputChange,onKeyPress:e.handleEnterPressOnInput,value:e.value}),r.a.createElement(h,{handleFileChange:e.handleFileChange}),r.a.createElement(p,{text:"detect!",handleClick:e.handleSubmit}))},v=a(30);var E=function(e){return r.a.createElement("li",{className:"list__heading"},r.a.createElement("h4",null,e.heading),r.a.createElement("span",null,"probability"))};var g=function(e){return r.a.createElement("li",{className:"list__item"},r.a.createElement("span",null,e.name),r.a.createElement("span",null,e.probability))};function b(e){return Object.entries(e).map((function(e,a){var n=e[0].split("_").join(" "),i=function(e){var a=e[1].concepts;a.length>5&&(a.length=5);return a.map((function(e){var a=e.name,n=e.value,i=e.id;return r.a.createElement(g,{name:a,probability:t(n),key:i})}))}(e);return r.a.createElement("ul",{key:a},r.a.createElement(E,{heading:n}),i)}));function t(e){var t=Math.round(100*e);return 0===t&&(t="<1"),t+="%"}}var y=new(a.n(v).a.App)({apiKey:"a3e509d16c2048238325574215e3192b"});var x=function(e){var t=b(e.clarifaiRegions[e.activeBox].data.face);return r.a.createElement("div",{className:"list__container"},r.a.createElement("h2",null,"result"),t)};var S=function(){return r.a.createElement("div",{className:"loader"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))};var _=function(e){var t=e.children,a=Array.isArray(t)?"template-around wrapper":"template-center wrapper";return r.a.createElement("main",{className:a},t)};a(28);var B=function(e){var t=e.box,a=e.id,n=e.isActive,i=e.setActive,l=n?"FaceBox FaceBox-active":"FaceBox",c={top:t.top,left:t.left,bottom:t.bottom,right:t.right};return r.a.createElement("div",{className:l,style:c,onClick:function(){i(a)}})},k=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).calculateBoxLocations=function(e){var t=a.props.clarifaiRegions.map((function(e){return e.region_info.bounding_box})),n=e.target,r=Number(n.width),i=Number(n.height),l=t.map((function(e,t){return{top:i*e.top_row,left:r*e.left_col,bottom:i-i*e.bottom_row,right:r-r*e.right_col,id:String(t)}}));a.setState({boxes:l})},a.state={boxes:[]},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.state.boxes.map((function(t){return r.a.createElement(B,{box:t,key:t.id,id:t.id,isActive:e.props.activeBox===t.id,setActive:e.props.setActiveBox})}));return r.a.createElement("div",{className:"img__container centered swing-in-top-fwd"},r.a.createElement("div",{className:"relative"},r.a.createElement("img",{id:"img",onLoad:this.calculateBoxLocations,src:this.props.imgSrc,alt:"yours",className:"img"}),t))}}]),t}(r.a.Component),C=function(e){var t=null;switch(e){case"BAD_REQUEST":t="Looks like we can't find your photo! \n\t\tMake sure that provided URL isn't privite and you spell it right.";break;case"NO_FACE_DETECTED":t="Sorry, we haven't detected any faces!\n\t\tBut you can try with another photo!";break;default:t="Oops! Something went wrong. We're looking for a solution!"}return t};var N=function(e){var t=e.type,a=C(t);return r.a.createElement("div",{className:"ErrorBox slide-in-fwd-center"},r.a.createElement("h3",null,"Error!"),r.a.createElement("p",null,a))};var w=function(e){var t=null;switch(e.presenterState){case"default":t=null;break;case"loading":t=r.a.createElement(S,null);break;case"loaded":t=[r.a.createElement(k,{key:"img",imgSrc:e.imgSrc,clarifaiRegions:e.clarifaiRegions,activeBox:e.activeBox,setActiveBox:e.setActiveBox}),r.a.createElement(x,{key:"list",activeBox:e.activeBox,clarifaiRegions:e.clarifaiRegions})];break;case"error":t=r.a.createElement(N,{type:e.errorType})}return r.a.createElement(_,null,t)},O=a(31),A=a.n(O),F={particles:{number:{value:160,density:{enable:!1}},size:{value:10,random:!0},move:{direction:"bottom",out_mode:"out"},line_linked:{enable:!1}},interactivity:{events:{onclick:{enable:!0,mode:"remove"}},modes:{remove:{particles_nb:10}}}},R=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleInputChange=function(e){var t=e.target.value;a.setState({input:t,request:{body:t,src:t}})},a.handleFileChange=function(e){var t=e.target.files[0];if(t){var n=new FileReader;n.readAsDataURL(t),n.onload=function(){var e=n.result.replace(/^data:.+;base64,/,"");a.setState({input:t.name,request:{body:e,src:n.result}}),a.handleSubmit()}}else a.setState({input:"",request:null})},a.handleSubmit=function(){a.state.input&&(a.setState((function(e){return{imgSrc:e.request.src,presenterState:"loading"}})),a.requestClarifai(a.state.request.body))},a.requestClarifai=function(e){y.models.predict("c0c0ac362b03416da06ab3fa36fb58e3",e).then((function(e){if(function(e){return!!e.outputs[0].data.hasOwnProperty("regions")}(e)){var t=function(e){return e.outputs[0].data.regions}(e);a.setState({presenterState:"loaded",clarifaiRegions:t,errorType:null,activeBox:"0"})}else a.setState({presenterState:"error",errorType:"NO_FACE_DETECTED"})}),(function(e){console.log(e),a.setState({presenterState:"error",errorType:"BAD_REQUEST"})}))},a.handleEnterPressOnInput=function(e){"Enter"===e.key&&a.handleSubmit()},a.setActiveBox=function(e){a.state.activeBox!==e&&a.setState({activeBox:e})},a.state={input:"",imgSrc:"",request:null,presenterState:"default",clarifaiRegions:null,activeBox:null,errorType:null},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(d,null),r.a.createElement(f,{value:this.state.input,handleInputChange:this.handleInputChange,handleEnterPressOnInput:this.handleEnterPressOnInput,handleFileChange:this.handleFileChange,handleSubmit:this.handleSubmit}),r.a.createElement(w,{imgSrc:this.state.imgSrc,presenterState:this.state.presenterState,clarifaiRegions:this.state.clarifaiRegions,setActiveBox:this.setActiveBox,activeBox:this.state.activeBox,errorType:this.state.errorType}),r.a.createElement(A.a,{className:"particles",params:F}))}}]),t}(r.a.Component);l.a.render(r.a.createElement(R,null),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.cafbed3d.chunk.js.map